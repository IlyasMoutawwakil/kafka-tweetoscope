<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MockTwitterStreamScenario.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Tweet</a> &gt; <a href="index.source.html" class="el_package">tweetoscope.tweetsProducer</a> &gt; <span class="el_source">MockTwitterStreamScenario.java</span></div><h1>MockTwitterStreamScenario.java</h1><pre class="source lang-java linenums">/*
Copyright 2022 Virginie Galtier

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this program. If not, see &lt;https://www.gnu.org/licenses/&gt;
 */
package tweetoscope.tweetsProducer;

import java.time.OffsetDateTime;
import java.time.ZoneOffset;
import java.util.concurrent.Flow.Subscriber;

import com.twitter.clientlib.model.Tweet;

/**
 * Mimics the TwitterStreamSampleReaderSingleton class. To be used when the
 * Twitter sampled stream rate limit is exceeded for instance. Creates and
 * publishes a predefined set of Tweets.
 * 
 * @author Virginie Galtier
 *
 */
public final class MockTwitterStreamScenario extends OfflineTweetsProducer {

	/**
	 * Creates a MockTwitterStreamScenario.
	 * 
	 */
	public MockTwitterStreamScenario() {
<span class="nc" id="L40">		super();</span>
<span class="nc" id="L41">	}</span>

	/**
	 * Crafts a predefined set of Tweets and posts them to the Java Flow
	 */
	@Override
	public void run() {
<span class="nc" id="L48">		Tweet[] tweets = new Tweet[10];</span>
		
<span class="nc" id="L50">		tweets[0] = new Tweet();</span>
<span class="nc" id="L51">		tweets[0].setId(&quot;001&quot;);</span>
<span class="nc" id="L52">		tweets[0].setCreatedAt(OffsetDateTime.of(2022, 6, 20, 11, 46, 23, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L53">		tweets[0].setText(&quot;Choisissez un #travail que vous aimez et vous n'aurez pas à travailler un seul jour de votre vie&quot;);</span>
<span class="nc" id="L54">		tweets[0].setAuthorId(&quot;31&quot;);</span>
<span class="nc" id="L55">		tweets[0].setConversationId(&quot;01&quot;);</span>
<span class="nc" id="L56">		tweets[0].getGeo();</span>
<span class="nc" id="L57">		tweets[0].setLang(&quot;fr&quot;);</span>
		
<span class="nc" id="L59">		tweets[1] = new Tweet();</span>
<span class="nc" id="L60">		tweets[1].setId(&quot;002&quot;);</span>
<span class="nc" id="L61">		tweets[1].setCreatedAt(OffsetDateTime.of(2022, 6, 20, 11, 48, 20, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L62">		tweets[1].setText(&quot;Si on travaille pour gagner sa vie, pourquoi se tuer au #travail ?&quot;);</span>
<span class="nc" id="L63">		tweets[1].setAuthorId(&quot;31&quot;);</span>
<span class="nc" id="L64">		tweets[1].setConversationId(&quot;01&quot;);</span>
<span class="nc" id="L65">		tweets[1].getGeo();</span>
<span class="nc" id="L66">		tweets[1].setLang(&quot;fr&quot;);</span>
		
<span class="nc" id="L68">		tweets[2] = new Tweet();</span>
<span class="nc" id="L69">		tweets[2].setId(&quot;003&quot;);</span>
<span class="nc" id="L70">		tweets[2].setCreatedAt(OffsetDateTime.of(2022, 6, 24, 6, 6, 13, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L71">		tweets[2].setText(&quot;#Failure is not the opposite of #success: it’s part of success.&quot;);</span>
<span class="nc" id="L72">		tweets[2].setAuthorId(&quot;32&quot;);</span>
<span class="nc" id="L73">		tweets[2].setConversationId(&quot;01&quot;);</span>
<span class="nc" id="L74">		tweets[2].getGeo();</span>
<span class="nc" id="L75">		tweets[2].setLang(&quot;en&quot;);</span>

<span class="nc" id="L77">		tweets[3] = new Tweet();</span>
<span class="nc" id="L78">		tweets[3].setId(&quot;004&quot;);</span>
<span class="nc" id="L79">		tweets[3].setCreatedAt(OffsetDateTime.of(2022, 7, 2, 4, 44, 17, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L80">		tweets[3].setText(&quot;You are not your resume, you are your #work.&quot;);</span>
<span class="nc" id="L81">		tweets[3].setAuthorId(&quot;34&quot;);</span>
<span class="nc" id="L82">		tweets[3].setConversationId(&quot;01&quot;);</span>
<span class="nc" id="L83">		tweets[3].getGeo();</span>
<span class="nc" id="L84">		tweets[3].setLang(&quot;en&quot;);</span>

<span class="nc" id="L86">		tweets[4] = new Tweet();</span>
<span class="nc" id="L87">		tweets[4].setId(&quot;005&quot;);</span>
<span class="nc" id="L88">		tweets[4].setCreatedAt(OffsetDateTime.of(2022, 8, 20, 10, 49, 23, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L89">		tweets[4].setText(&quot;People who wonder if the glass is half empty or half full miss the point. The glass is refillable.&quot;);</span>
<span class="nc" id="L90">		tweets[4].setAuthorId(&quot;35&quot;);</span>
<span class="nc" id="L91">		tweets[4].setConversationId(&quot;03&quot;);</span>
<span class="nc" id="L92">		tweets[4].getGeo();</span>
<span class="nc" id="L93">		tweets[4].setLang(&quot;en&quot;);</span>

<span class="nc" id="L95">		tweets[5] = new Tweet();</span>
<span class="nc" id="L96">		tweets[5].setId(&quot;006&quot;);</span>
<span class="nc" id="L97">		tweets[5].setCreatedAt(OffsetDateTime.of(2022, 8, 20, 11, 23, 31, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L98">		tweets[5].setText(&quot;If you think you are too small to make a difference, try sleeping with a mosquito.&quot;);</span>
<span class="nc" id="L99">		tweets[5].setAuthorId(&quot;33&quot;);</span>
<span class="nc" id="L100">		tweets[5].setConversationId(&quot;04&quot;);</span>
<span class="nc" id="L101">		tweets[5].getGeo();</span>
<span class="nc" id="L102">		tweets[5].setLang(&quot;en&quot;);</span>

<span class="nc" id="L104">		tweets[6] = new Tweet();</span>
<span class="nc" id="L105">		tweets[6].setId(&quot;007&quot;);</span>
<span class="nc" id="L106">		tweets[6].setCreatedAt(OffsetDateTime.of(2022, 8, 30, 2, 15, 0, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L107">		tweets[6].setText(&quot;Nothing will #work unless you do.&quot;);</span>
<span class="nc" id="L108">		tweets[6].setAuthorId(&quot;34&quot;);</span>
<span class="nc" id="L109">		tweets[6].setConversationId(&quot;03&quot;);</span>
<span class="nc" id="L110">		tweets[6].getGeo();</span>
<span class="nc" id="L111">		tweets[6].setLang(&quot;en&quot;);</span>

<span class="nc" id="L113">		tweets[7] = new Tweet();</span>
<span class="nc" id="L114">		tweets[7].setId(&quot;008&quot;);</span>
<span class="nc" id="L115">		tweets[7].setCreatedAt(OffsetDateTime.of(2022, 9, 1, 8, 30, 20, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L116">		tweets[7].setText(&quot;If you get tired, learn to rest, not to quit.&quot;);</span>
<span class="nc" id="L117">		tweets[7].setAuthorId(&quot;35&quot;);</span>
<span class="nc" id="L118">		tweets[7].setConversationId(&quot;05&quot;);</span>
<span class="nc" id="L119">		tweets[7].getGeo();</span>
<span class="nc" id="L120">		tweets[7].setLang(&quot;en&quot;);</span>

<span class="nc" id="L122">		tweets[8] = new Tweet();</span>
<span class="nc" id="L123">		tweets[8].setId(&quot;009&quot;);</span>
<span class="nc" id="L124">		tweets[8].setCreatedAt(OffsetDateTime.of(2022, 9, 2, 7, 55, 56, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L125">		tweets[8].setText(&quot;#Failure is #success in progress.&quot;);</span>
<span class="nc" id="L126">		tweets[8].setAuthorId(&quot;33&quot;);</span>
<span class="nc" id="L127">		tweets[8].setConversationId(&quot;02&quot;);</span>
<span class="nc" id="L128">		tweets[8].getGeo();</span>
<span class="nc" id="L129">		tweets[8].setLang(&quot;en&quot;);</span>

<span class="nc" id="L131">		tweets[9] = new Tweet();</span>
<span class="nc" id="L132">		tweets[9].setId(&quot;010&quot;);</span>
<span class="nc" id="L133">		tweets[9].setCreatedAt(OffsetDateTime.of(2022, 9, 3, 12, 40, 25, 0, ZoneOffset.UTC));</span>
<span class="nc" id="L134">		tweets[9].setText(&quot;The only place #success comes before #work is in the dictionary.&quot;);</span>
<span class="nc" id="L135">		tweets[9].setAuthorId(&quot;36&quot;);</span>
<span class="nc" id="L136">		tweets[9].setConversationId(&quot;07&quot;);</span>
<span class="nc" id="L137">		tweets[9].getGeo();</span>
<span class="nc" id="L138">		tweets[9].setLang(&quot;en&quot;);</span>

<span class="nc bnc" id="L140" title="All 2 branches missed.">		for (int i = 0; i &lt; tweets.length; i++) {</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">			for (Subscriber&lt;? super Tweet&gt; s : subscribers) {</span>
<span class="nc" id="L142">				s.onNext(tweets[i]);//subscribe each tweet.</span>
<span class="nc" id="L143">			}</span>
		}
<span class="nc" id="L145">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>